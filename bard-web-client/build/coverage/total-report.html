<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Total coverage report</title>
<style>
    body {
        margin: 0;
        padding: 18px 10px;
        font: 0.8125em Verdana, sans-serif;
    }

    h1 {
        font-size: 1.2em;
        margin: 0;
        padding-left: 10px;
        padding-bottom: 5px;
    }

    table {
        border-collapse: collapse;
    }

    .stats {
        width: 100%;
    }

    .stats-header th {
        color: white;
    }

    .stats-header th {
        text-align: right;
    }

    .stats-header th:first-child {
        text-align: left;
    }

    .stats td.statements,
    .stats td.executed,
    .stats td.coverage {
        text-align: right;
    }

    .stats > thead th,
    .stats > thead td,
    .stats > tbody > tr > td {
        padding: 4px 10px;
    }

    .stats > thead th {
        font-size: 0.85em;
    }

    .stats > thead > tr:first-child th {
        background-color: #758691;
    }

    .stats > thead th:first-child,
    .stats > thead td:first-child,
    .stats > tbody > tr > td:first-child {
        border-top-left-radius: 4px;
        border-bottom-left-radius: 4px;
    }

    .stats > thead th:last-child,
    .stats > thead td:last-child,
    .stats > tbody > tr > td:last-child {
        border-top-right-radius: 4px;
        border-bottom-right-radius: 4px;
    }

    .stats > tbody > tr:nth-child(4n + 1) {
        background-color: #e7e8e9;
    }

    .stats > tbody > tr:nth-child(2n + 1) {
        cursor: pointer;
    }

    .stats > tbody > tr:nth-child(2n + 1):hover {
        background-color: #b1c7d4;
    }

    .stats tr.no-statements {
        opacity: 0.6;
    }

    a, a:hover, a:visited, a:active {
        color: black;
        text-decoration: none;
    }

    .bar-container {
        padding: 2px;
        padding-right: 8px;
        width: 15%;
    }

    .bar {
        background-color: #DDD;
        background-color: rgba(0, 0, 0, 0.1);
        border-radius: 8px 8px 8px 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1) inset, 0 1px 0 rgba(255, 255, 255, 0.5);
        height: 7px;
        padding: 1px;
        position: relative;
        width: 100%;
    }

    .bar > span {
        background-color: #AEDB4B;
        border-radius: 6px 6px 6px 6px;
        box-shadow: 0 -2px 2px rgba(0, 0, 0, 0.2) inset, 0 1px 0 rgba(255, 255, 255, 0.4) inset, 0 -1px 0 rgba(0, 0, 0, 0.15) inset;
        display: block;
        height: 100%;
    }

    .bar > span:before {
        position: absolute;
        width: 25%;
        height: 100%;
        left: 0;
        top: 0;
        border-right: 1px solid rgba(0,0,0,0.1);
        content: ' ';
    }
    .bar > span:after {
        position: absolute;
        width: 25%;
        height: 100%;
        left: 50%;
        top: 0;
        border-left: 1px solid rgba(0,0,0,0.1);
        border-right: 1px solid rgba(0,0,0,0.1);
        content: ' ';
    }

    /* line by line coverage styles */

    .line-coverage {
        margin: 10px 0px;
    }

    .line-coverage th {
        border-right: 1px solid #758691;
    }

    .line-coverage th div,
    .line-coverage td div {
        text-align: center;
    }

    .line-coverage th div {
        margin: 0px 10px 0px 4px;
    }

    .line-coverage td div {
        padding: 2px 6px 2px 4px;
        margin: 0;
    }

    .line-coverage th,
    .line-coverage td,
    .line-coverage pre {
        padding: 0;
        margin: 0;

        font-size: 1.05em;
        font-weight: normal;
        font-family: Courier New;
    }

    .line-coverage th div, 
    .line-coverage td.times-executed div {
        border-radius: 0 5px 5px 0;
        color: rgba(0, 0, 0, 0.8);
        font-size: 0.9em;
    }

    .line-coverage td pre {
        margin-left: 8px;
    }

    .line-coverage tr.covered td.times-executed div {
        background-color: #aedb4b;
    }

    .line-coverage tr.not-covered td.times-executed div {
        background-color: #ff8134;
    }

    .line-coverage span.keyword {
        color: #000080;
        font-weight: bold;
    }

    .line-coverage span.string {
        color: #008000;
    }

    .line-coverage span.number {
        color: #0000ff;
    }

    .line-coverage a {
        color: black;
    }

    .line-coverage-cell > div {
        color: #FF8134;
    }

    .line-coverage-cell > div > a {
        color: #FF8134;
        font-weight: bold;
        text-decoration: underline;
    }

    .stats > thead td {
        font-weight: bold;
    }

    .footer {
        padding-top: 5px;
        text-align: right;
        font-style: italic;
        font-size: 0.85em;
        opacity: 0.7;
    }

    .footer a {
        text-decoration: underline;
    }
</style>
<script type="text/javascript">
    (function () {
        var reservedKeywords = [
            "break",
            "case",
            "catch",
            "continue",
            "debugger",
            "default",
            "delete",
            "do",
            "else",
            "false",
            "finally",
            "for",
            "function",
            "if",
            "in",
            "instanceof",
            "new",
            "null",
            "return",
            "switch",
            "this",
            "true",
            "throw",
            "try",
            "typeof",
            "var",
            "void",
            "while",
            "with"
        ];

        String.prototype.reverse = function () {
            return this.split('').reverse().join('');
        };

        var reservedKeywordsPattern = new RegExp('\\b(' + reservedKeywords.join('|') + ')\\b', 'g');
        var jsStringPattern = /('(?!\\').*'|"(?!\\").*")/g;
        var jsNumberPattern = /\b(\d+(?:\.\d+)?)\b/g;

        function el(type) {
            return document.createElement(type);
        }

        function withText(node, text) {
            node.innerHTML = text;
            return node;
        }

        function maybeAppendMissedLines(id, frag, missed, data) {
            if (missed.length === 0) {
                return;
            }

            var rangeAnchors = [];
            var range;

            for (var i = 0, len = missed.length; i < len; i++) {
                var start = missed[i];
                var end = start;

                range = [start];

                for (var j = i + 1; j < len; j++) {
                    var missedLineNr = missed[j];
                    var consecutive = false;

                    // consecutive missed lines
                    if (missedLineNr === end + 1) {
                        consecutive = true;
                    } else {
                        // let's check if all lines in between are not executable
                        var dataIdx = end;

                        while (dataIdx < missedLineNr) {
                            if (data[dataIdx][0] > -1) {
                                if (data[dataIdx][0] === 0) {
                                    missedLineNr = dataIdx + 1;
                                    consecutive = true;
                                }

                                break;
                            }

                            dataIdx++;
                        }
                    }

                    if (consecutive) {
                        end = missedLineNr;
                        i = j;
                    }
                }

                range[1] = end;

                var rangeStr = start === end ? start : start + '-' + end;
                rangeAnchors.push('<a href="' + '#' + id + '-' + start + '">' + rangeStr + '</a>');
            }

            frag.appendChild(withText(el('div'), 'Missed lines: ' + rangeAnchors.join(', ')));
        }

        function createSourceTable(id, dataEl) {
            var d = document;

            var data = eval(dataEl.innerHTML);
            var td = dataEl.parentNode;
            td.removeChild(dataEl);

            var frag = d.createDocumentFragment();

            var table = el('table');
            table.className = 'line-coverage';

            var missed = [];

            for (var i = 0, len = data.length; i < len; i++) {
                var tr = el('tr');
                var record = data[i];

                var timesExecuted = record[0];
                var src = record[1];
                var executable = timesExecuted > -1;
                var lineNr = i + 1;

                if (timesExecuted === 0) {
                    missed.push(lineNr);
                }

                tr.className = !executable ? 'not-executable' : timesExecuted > 0 ? 'covered' : 'not-covered';
                table.appendChild(tr);

                var lineNrNode = el('th');

                var anchor = el('a');
                anchor.setAttribute('name', id + '-' + lineNr);
                anchor.appendChild(withText(el('div'), lineNr));

                lineNrNode.appendChild(anchor);
                tr.appendChild(lineNrNode);

                var timesExecutedNode = el('td');
                timesExecutedNode.className = 'times-executed';
                timesExecutedNode.appendChild(withText(el('div'), executable ? (timesExecuted || '!') : '&nbsp;'));
                tr.appendChild(timesExecutedNode);

                var srcNode = el('td');

                var styledSrc = src
                    .reverse().replace(jsStringPattern, '>naps/<$1>"gnirts"=ssalc naps<').reverse()
                    .replace(jsNumberPattern, '<span class="number">$1</span>')
                    .replace(reservedKeywordsPattern, '<span class="keyword">$1</span>');

                srcNode.appendChild(withText(el('pre'), styledSrc));

                tr.appendChild(srcNode);
            }

            maybeAppendMissedLines(id, frag, missed, data);
            frag.appendChild(table);

            td.appendChild(frag.cloneNode(true));
        }

        window.__coverage_toggleSection = function (hash) {
            var d = document;
            var id = hash.indexOf('-') > -1 ? hash.substring(0, hash.indexOf('-')) : hash;

            var srcRow = d.getElementById('__src_' + id);
            if (!srcRow) {
                return;
            }

            var dataEl = d.getElementById('__data_' + id);

            if (dataEl) {
                createSourceTable(id, dataEl);
            }

            var show = srcRow.style.display === 'none';

            if (show) {
                srcRow.style.display = '';
                window.location.hash = "#" + hash;
            } else {
                srcRow.style.display = 'none';
                window.location.hash = '#closed';
            }
        }

        window.onload = function () {
            if (window.location.hash) {
                __coverage_toggleSection(window.location.hash.substr(1));
            }
        };

    })();
</script>
</head>
<body>
    <h1>Total coverage report</h1>
    <table class="stats">
        <thead>
            <tr class="stats-header">
                <th>File</th>
                <th>Statements</th>
                <th>Executed</th>
                <th>Coverage</th>
                <th></th>
            </tr>
            <tr class="stats-header ">
                <td>Total</td>
                <td class="statements">282</td>
                <td class="executed">213</td>
                <td class="coverage">
                        75&thinsp;%
                </td>
                <td class="bar-container">
                        <div class="bar">
                            <span style="width: 75%; background-color: rgb(196, 219, 75);"></span>
                        </div>
                </td>
            </tr>
        </thead>
        <tbody>
            <tr  onclick="__coverage_toggleSection('ab52d9914c7413cd7c0355c8be10ab0e'); return false;">
                <td><a href="#">web-app/js/<strong>activeVrsTested.js</strong></a></td>
                <td class="statements">14</td>
                <td class="executed">7</td>
                <td class="coverage">
                        50&thinsp;%
                </td>
                <td class="bar-container">
                        <div class="bar">
                            <span style="width: 50%; background-color: rgb(219, 219, 75);"></span>
                        </div>
                </td>
            </tr>
            <tr id="__src_ab52d9914c7413cd7c0355c8be10ab0e" style="display: none;">
                <td class="line-coverage-cell" colspan="5"><p id="__data_ab52d9914c7413cd7c0355c8be10ab0e">[[-1,''],[1,'var waitingImage = \'&lt;img src=\&quot;\/bardwebclient\/static\/images\/ajax-loader.gif\&quot; alt=\&quot;loading\&quot; title=\&quot;loading\&quot;\/&gt;\';'],[-1,''],[1,'var ActiveVrsTestedHandler = {'],[-1,'    setup : function() {'],[1,'        $(\&quot;.activeVrsTested:not(.processed)\&quot;).each(function () {'],[0,'            var activeVrsTestedDivId = $(this).attr(\'id\');'],[-1,''],[0,'            var url = $(this).attr(\'href\');'],[0,'            $.ajax({'],[-1,'                url:url,'],[-1,'                type:\'GET\','],[-1,'                cache:false,'],[-1,'                \/\/timeout: 10000,'],[-1,'                beforeSend: function() {'],[0,'                    $(\'#\' + activeVrsTestedDivId).html(waitingImage);'],[-1,'                },'],[-1,'                success:function (data) {'],[0,'                    $(\'#\' + activeVrsTestedDivId).html(data);'],[-1,'                 },'],[-1,'                error:function() {'],[0,'                    $(\'#\' + activeVrsTestedDivId).html(\'No data found\');'],[-1,'                },'],[-1,'                complete:function() {'],[0,'                    $(this).addClass(\&quot;processed\&quot;);'],[-1,'                }'],[-1,'            });'],[-1,'        });'],[-1,'    }'],[-1,'};'],[-1,''],[1,'$(document).on(\'search.complete\', \'.activeVrsTested\', ActiveVrsTestedHandler.setup);'],[1,'$(document).on(\'search.complete\', \'#compounds\', ActiveVrsTestedHandler.setup);'],[-1,''],[1,'$(document).ready(function () {'],[1,'    ActiveVrsTestedHandler.setup();'],[-1,'});']]</p></td>
            </tr><tr  onclick="__coverage_toggleSection('9c0b63802f3b0ffb3b3d210182a4e4cf'); return false;">
                <td><a href="#">web-app/js/<strong>autocomplete.js</strong></a></td>
                <td class="statements">11</td>
                <td class="executed">6</td>
                <td class="coverage">
                        54&thinsp;%
                </td>
                <td class="bar-container">
                        <div class="bar">
                            <span style="width: 54%; background-color: rgb(215, 219, 75);"></span>
                        </div>
                </td>
            </tr>
            <tr id="__src_9c0b63802f3b0ffb3b3d210182a4e4cf" style="display: none;">
                <td class="line-coverage-cell" colspan="5"><p id="__data_9c0b63802f3b0ffb3b3d210182a4e4cf">[[1,'$(document).ready(function () {'],[-1,''],[-1,'    \/\/set up auto complete'],[1,'    var autoOpts = {'],[-1,'        source:\&quot;\/bardwebclient\/bardWebInterface\/autoCompleteAssayNames\&quot;,'],[-1,'        minLength:2,'],[-1,'        html: true'],[-1,'    };'],[1,'    $(\&quot;#searchString\&quot;).autocomplete(autoOpts);'],[1,'    $(\&quot;#searchString\&quot;).bind(\&quot;autocompleteselect\&quot;, function (event, ui) {'],[0,'        $(\&quot;#searchString\&quot;).val(ui.item.value)'],[0,'        $(\&quot;#searchButton\&quot;).click();'],[-1,'    });'],[-1,'    \/\/ make sure to close the autocomplete box when the search button or ENTER are clicked'],[1,'    $(\&quot;#searchButton\&quot;).click(function () {'],[0,'        $(\&quot;#searchString\&quot;).autocomplete(\&quot;close\&quot;);'],[-1,'    });'],[1,'    $(\'#searchButton\').keypress(function(eventData) {'],[0,'        if(eventData.which == 13) {'],[0,'            $(\&quot;#searchString\&quot;).autocomplete(\&quot;close\&quot;);'],[-1,'        }'],[-1,'    });'],[-1,''],[-1,'});']]</p></td>
            </tr><tr  onclick="__coverage_toggleSection('13186c04eb7ed4abd17ec3c07dca6d08'); return false;">
                <td><a href="#">web-app/js/<strong>search.js</strong></a></td>
                <td class="statements">193</td>
                <td class="executed">150</td>
                <td class="coverage">
                        77&thinsp;%
                </td>
                <td class="bar-container">
                        <div class="bar">
                            <span style="width: 77%; background-color: rgb(194, 219, 75);"></span>
                        </div>
                </td>
            </tr>
            <tr id="__src_13186c04eb7ed4abd17ec3c07dca6d08" style="display: none;">
                <td class="line-coverage-cell" colspan="5"><p id="__data_13186c04eb7ed4abd17ec3c07dca6d08">[[-1,'\/\/use GLOBAL params here'],[1,'var spinnerImageLink = \'&lt;img src=\&quot;\/bardwebclient\/static\/images\/loading_icon.gif\&quot; alt=\&quot;loading\&quot; title=\&quot;loading\&quot; height=\&quot;16\&quot; width=\&quot;16\&quot;\/&gt;\';'],[1,'var bigSpinnerImage = \'&lt;div class=\&quot;tab-message\&quot;&gt;&lt;img src=\&quot;\/bardwebclient\/static\/images\/ajax-loader.gif\&quot; alt=\&quot;loading\&quot; title=\&quot;loading\&quot;\/&gt;&lt;\/div&gt;\';'],[1,'var errorImageTwitterBootstrap = \'&lt;img src=\&quot;\&quot;  class=\&quot;icon-exclamation-sign\&quot; alt=\&quot;error\&quot; height=\&quot;16\&quot; width=\&quot;16\&quot; \/&gt;\';'],[-1,''],[-1,'\/\/matches a number followed by a zero or more spaces, followed by max of one comma'],[-1,'\/\/The question mark and the colon after the opening round bracket are the special syntax that'],[-1,'\/\/ you can use to tell the regex engine that this pair of brackets should not create a backreference'],[-1,'\/\/You do that to optimize this regular expression'],[-1,'\/\/see http:\/\/www.regular-expressions.info\/brackets.html'],[1,'var NUMBER_MATCHING_REGEX = \/^\\s*\\d+\\s*(?:,?\\s*\\d+\\s*)*$\/;'],[-1,''],[1,'$(document).ready(function () {'],[-1,''],[-1,'    \/\/set up form submission'],[1,'    $(\'#searchForm\').submit(function (event) {'],[0,'        var searchString = $(\&quot;#searchString\&quot;).val();'],[0,'        handleMainFormSubmit(searchString);'],[0,'        return false; \/\/do not submit form the normal way, use Ajax instead'],[-1,''],[-1,'    });'],[-1,''],[-1,'    \/\/set up filter form submissions'],[-1,'    \/\/We are using live because we want to do late binding'],[-1,'    \/\/these forms would not exist when the document first loads'],[1,'    $(\'#AssayFacetForm\').live(\'submit\', function (event) {'],[0,'        var searchString = $(\&quot;#searchString\&quot;).val();'],[0,'        handleFilteredQuery(searchString, \'AssayFacetForm\', \'AssayFacetForm\', \'assaysTab\', \'totalAssays\', \'assays\', \'Assay Definitions \');'],[0,'        return false; \/\/do not submit form the normal way, use Ajax instead'],[-1,''],[-1,'    });'],[1,'    $(\'#AssayFacetForm_ResetButton\').live(\'click\', function () {'],[0,'        resetAllFilters(\'AssayFacetForm\');'],[-1,'    });'],[1,'    $(\'#ProjectFacetForm\').live(\'submit\', function (event) {'],[0,'        var searchString = $(\&quot;#searchString\&quot;).val();'],[0,'        handleFilteredQuery(searchString, \'ProjectFacetForm\', \'ProjectFacetForm\', \'projectsTab\', \'totalProjects\', \'projects\', \'Projects \');'],[0,'        return false; \/\/do not submit form the normal way, use Ajax instead'],[-1,'    });'],[1,'    $(\'#ProjectFacetForm_ResetButton\').live(\'click\', function () {'],[0,'        resetAllFilters(\'ProjectFacetForm\');'],[-1,'    });'],[1,'    $(\'#CompoundFacetForm\').live(\'submit\', function (event) {'],[0,'        var searchString = $(\&quot;#searchString\&quot;).val();'],[0,'        handleFilteredQuery(searchString, \'CompoundFacetForm\', \'CompoundFacetForm\', \'compoundsTab\', \&quot;totalCompounds\&quot;, \'compounds\', \'Compounds \');'],[0,'        return false; \/\/do not submit form the normal way, use Ajax instead'],[-1,'    });'],[1,'    $(\'#CompoundFacetForm_ResetButton\').live(\'click\', function () {'],[0,'        resetAllFilters(\'CompoundFacetForm\');'],[-1,'    });'],[-1,''],[1,'    function resetAllFilters(facetForm) {'],[-1,'        \/\/Uncheck all filters'],[0,'        $(\'#\' + facetForm + \' input[type=\&quot;checkbox\&quot;]\').attr(\'checked\', false);'],[-1,'        \/\/Resubmit the form'],[0,'        $(\'#\' + facetForm).submit()'],[-1,'    }'],[-1,''],[-1,'    \/\/=== Handle Paging. We bind to all of the paging css classes on the anchor tag ==='],[1,'    $(\&quot;a.step,a.nextLink,a.prevLink\&quot;).live(\'click\', function (event) {'],[0,'        event.preventDefault();\t\/\/ prevent the default action behaviour to happen'],[0,'        var url = $(this).attr(\'href\');'],[-1,''],[0,'        handlePaging(url)'],[-1,'    });'],[-1,''],[-1,'    \/\/ If there\'s a string in the search box, then submit it (used for redirect from home page)'],[1,'    if ($(\&quot;#searchString\&quot;).val() != null) {'],[0,'        $(\'#searchForm\').submit();'],[-1,'    }'],[-1,''],[-1,'});'],[-1,'\/**'],[-1,' * Handle paging using Ajax'],[-1,' * TODO: Only paging on the main form is supported.'],[-1,' * Paging with filters is not yet supported'],[-1,' * @param url'],[-1,' *\/'],[1,'function handlePaging(url) {'],[6,'    var assayIndex = url.indexOf(\&quot;Assays\&quot;);'],[6,'    var compoundIndex = url.indexOf(\&quot;Compounds\&quot;);'],[6,'    var projectIndex = url.indexOf(\&quot;Projects\&quot;);'],[6,'    var structureSearchIndex = url.indexOf(\&quot;Structure\&quot;);'],[-1,''],[-1,'    \/\/to find the right search to perform'],[6,'    if (assayIndex &gt;= 0) {'],[1,'        handleSearch(url, \'AssayFacetForm\', \'assaysTab\', \'totalAssays\', \'Assay Definitions \', \'assays\');'],[-1,'    }'],[5,'    else if (compoundIndex &gt;= 0) {'],[1,'        handleSearch(url, \'CompoundFacetForm\', \'compoundsTab\', \'totalCompounds\', \'Compounds \', \'compounds\');'],[-1,'    }'],[4,'    else if (projectIndex &gt;= 0) {'],[1,'        handleSearch(url, \'ProjectFacetForm\', \'projectsTab\', \'totalProjects\', \'Projects \', \'projects\');'],[-1,'    }'],[3,'    else if (structureSearchIndex &gt;= 0) {'],[1,'        handleStructureSearch(url, \'searchForm\');'],[-1,'    }'],[-1,'}'],[-1,'\/**'],[-1,' * Handle structure searches { exact, Substructure, superstructure and similarity searches}'],[-1,' *\/'],[1,'function handleStructureSearch(url, currentFormId) {'],[0,'    var searchForm = \&quot;#\&quot; + currentFormId;'],[-1,''],[-1,''],[0,'    $.ajax({'],[-1,'        url:url,'],[-1,'        type:\'POST\','],[-1,'        data:$(searchForm).serialize(),'],[-1,'        cache:false,'],[-1,'        \/\/timeout: 10000,'],[-1,'        beforeSend:function () {'],[0,'            resetTabsForStructureSearches();'],[0,'            $(\&quot;#compounds\&quot;).html(bigSpinnerImage);'],[-1,'        },'],[-1,'        success:function (data) {'],[0,'            $(\&quot;#compounds\&quot;).html(data);'],[0,'            var compoundTotal = \'Compounds (\' + $(\&quot;#totalCompounds\&quot;).val() + \')\';'],[0,'            $(\&quot;#compoundsTab\&quot;).html(compoundTotal);'],[0,'            $(\&quot;#compounds\&quot;).tab(\'show\');'],[-1,'        },'],[-1,'        error:function (request, status, error) {'],[0,'            $(\&quot;#compoundsTab\&quot;).html(\'Compounds \' + errorImageTwitterBootstrap);'],[0,'            $(\&quot;#compounds\&quot;).html(error);'],[-1,'        },'],[-1,'        complete:function () {'],[0,'            $(\&quot;#compounds\&quot;).trigger(\'search.complete\');'],[-1,'        }'],[-1,'    });'],[-1,'}'],[-1,'\/**'],[-1,' *'],[-1,' * @param controllerAction - The name of the controller action that would handle this request e.g \'searchAssays\''],[-1,' * @param tabId - The ID of the tab where the results should be displayed  e.g \'assaysTab\''],[-1,' * @param totalHitsForResourceId  - The ID of the hidden field that would hold the total number of hits'],[-1,' * @param prefixOfTextToAppearOnTab - The start of the string to display on the tab e.g \'Assay Definitions \''],[-1,' * @param updateDiv - Where the results will be displayed'],[-1,' *\/'],[1,'function handleSearch(controllerAction, currentFormId, tabId, totalHitsForResourceId, prefixOfTextToAppearOnTab, updateDiv) {'],[4,'    var tabDivElement = \'#\' + tabId;'],[4,'    var totalHitsElement = \'#\' + totalHitsForResourceId;'],[4,'    var updateDivId = \'#\' + updateDiv;'],[4,'    var searchForm = \&quot;#\&quot; + currentFormId;'],[4,'    $.ajax({'],[-1,'        url:controllerAction,'],[-1,'        type:\'POST\','],[-1,'        data:$(searchForm).serialize(),'],[-1,'        cache:false,'],[-1,'        \/\/timeout: 10000,'],[-1,'        beforeSend:function () {'],[0,'            $(tabDivElement).html(prefixOfTextToAppearOnTab + spinnerImageLink);'],[0,'            $(updateDivId).html(bigSpinnerImage);'],[-1,'        },'],[-1,'        success:function (data) {'],[2,'            $(updateDivId).html(data);'],[2,'            var total = prefixOfTextToAppearOnTab + \'(\' + $(totalHitsElement).val() + \')\';'],[2,'            $(tabDivElement).html(total);'],[-1,'        },'],[-1,'        error:function (request, status, error) {'],[2,'            $(tabDivElement).html(prefixOfTextToAppearOnTab + errorImageTwitterBootstrap);'],[2,'            $(updateDivId).html(error);'],[-1,'        },'],[-1,'        complete:function () {'],[0,'            $(updateDivId).trigger(\'search.complete\');'],[-1,'        }'],[-1,'    });'],[-1,'}'],[-1,''],[-1,'\/**'],[-1,' * Handles filtered form submission'],[-1,' * @param searchString - The search string started by the user'],[-1,' * @param facetFormType - The facet form type'],[-1,' * @param currentFormId - The id of the currently selected form'],[-1,' * @param currentTabId  -   The id of the currently selected tab'],[-1,' * @param numberOfHitsDivId  - The id of the div where we would display the total number of hits'],[-1,' * @param updateId    - The id of the div where we would display the results of the ajax call'],[-1,' * @param tabDisplayPrefix   The prefix for the string that we would display on the currently selected tab (for example \'Assay Definitions\')'],[-1,' *\/'],[1,'function handleFilteredQuery(searchString, facetFormType, currentFormId, currentTabId, numberOfHitsDivId, updateId, tabDisplayPrefix) {'],[-1,''],[3,'    var controllerAction = findTheAppropriateControllerActionForRequest(searchString, facetFormType);'],[3,'    if (controllerAction == \'structureSearch\') {'],[1,'        handleStructureSearch(\'\/bardwebclient\/bardWebInterface\/searchStructures\', currentFormId)'],[-1,'    }'],[2,'    else if (controllerAction != \'EMPTY\') {'],[1,'        handleSearch(\'\/bardwebclient\/bardWebInterface\/\' + controllerAction, currentFormId, currentTabId, numberOfHitsDivId, tabDisplayPrefix, updateId);'],[-1,'    }'],[-1,''],[-1,'}'],[-1,'\/**'],[-1,' * Based on the search String and the facetFormType figure out the Controller action to call'],[-1,' * @param searchString'],[-1,' * @param facetFormType'],[-1,' * @return {String}'],[-1,' *\/'],[1,'function findTheAppropriateControllerActionForRequest(searchString, facetFormType) {'],[-1,''],[7,'    var searchType = findSearchType(searchString);'],[7,'    return findTheAppropriateControllerActionFromFacetType(searchType, facetFormType)'],[-1,'}'],[1,'function findTheAppropriateControllerActionFromFacetType(searchType, facetFormType) {'],[15,'    if (!$.trim(searchType).length) { \/\/if empty search string'],[1,'        return \&quot;EMPTY\&quot;'],[-1,'    }'],[14,'    if (!$.trim(facetFormType).length) {  \/\/if empty facet form type'],[1,'        return \&quot;EMPTY\&quot;'],[-1,'    }'],[-1,''],[13,'    switch (searchType.toUpperCase()) {'],[-1,'        case \'FREE_TEXT\':'],[3,'            if (facetFormType == \'AssayFacetForm\') {'],[1,'                return \&quot;searchAssays\&quot;'],[-1,'            }'],[2,'            if (facetFormType == \'ProjectFacetForm\') {'],[1,'                return \&quot;searchProjects\&quot;'],[-1,'            }'],[1,'            if (facetFormType == \'CompoundFacetForm\') {'],[1,'                return \&quot;searchCompounds\&quot;'],[-1,'            }'],[0,'            break;'],[-1,'        case \'ID\':'],[-1,'        case \'CID\':'],[-1,'        case \'ADID\':'],[-1,'        case \'PID\':'],[6,'            if (facetFormType == \'AssayFacetForm\') {'],[2,'                return \'searchAssaysByIDs\''],[-1,'            }'],[4,'            if (facetFormType == \'ProjectFacetForm\') {'],[2,'                return \'searchProjectsByIDs\''],[-1,'            }'],[2,'            if (facetFormType == \'CompoundFacetForm\') {'],[2,'                return \'searchCompoundsByIDs\''],[-1,'            }'],[0,'            break;'],[-1,'        case \'STRUCTURE\':'],[3,'            if (facetFormType == \'CompoundFacetForm\') {'],[1,'                return  \'structureSearch\''],[-1,'            }'],[2,'            break;'],[-1,'    }'],[3,'    return \&quot;EMPTY\&quot;'],[-1,''],[-1,'}'],[1,'function showTab(tabId){'],[0,'    var tab = \&quot;#\&quot; + tabId;'],[0,'    $(tab).tab(\'show\');'],[-1,'}'],[-1,'\/**'],[-1,' * Handles form submission from the main form'],[-1,' * @param searchString  - The string entered into the main form\'s search box'],[-1,' *\/'],[1,'function handleMainFormSubmit(searchString) {'],[-1,''],[5,'    var searchType = findSearchType(searchString);'],[-1,''],[5,'    switch (searchType.toUpperCase()) {'],[-1,'        case \'FREE_TEXT\':'],[1,'            handleAllFreeTextSearches();'],[1,'            break;'],[-1,'        case \'ADID\':'],[1,'            activateCurrentTab(\'assaysTab\');'],[1,'           showTab(\&quot;assays\&quot;);'],[1,'            handleSearch(\'\/bardwebclient\/bardWebInterface\/searchAssaysByIDs\', \'searchForm\', \'assaysTab\', \'totalAssays\', \'Assay Definitions \', \'assays\');'],[1,'             break;'],[-1,'        case \'CID\':'],[1,'            activateCurrentTab(\'compoundsTab\') ;'],[1,'             showTab(\&quot;compounds\&quot;);'],[1,'            handleSearch(\'\/bardwebclient\/bardWebInterface\/searchCompoundsByIDs\', \'searchForm\', \'compoundsTab\', \'totalCompounds\', \'Compounds \', \'compounds\');'],[1,'            break;'],[-1,'        case \'PID\':'],[1,'            activateCurrentTab(\'projectsTab\');'],[-1,'           \/\/ $(\&quot;#projects\&quot;).tab(\'show\');'],[1,'            showTab(\&quot;projects\&quot;);'],[1,'            handleSearch(\'\/bardwebclient\/bardWebInterface\/searchProjectsByIDs\', \'searchForm\', \'projectsTab\', \'totalProjects\', \'Projects \', \'projects\');'],[1,'            break;'],[-1,'        case \'ID\':'],[-1,'            \/\/TODO: Right now we are treating Id searches like regular searches'],[-1,'            \/\/i.e we send the ids to all 3 resources'],[-1,'            \/\/We intend to change to a modal view, where a user picks'],[-1,'            \/\/the type of id (like we do with structure searches) so that we'],[-1,'            \/\/can only send the query to the resource of interest'],[1,'            handleAllIdSearches();'],[1,'            break;'],[-1,'        case \'STRUCTURE\':'],[0,'            handleStructureSearch(\'\/bardwebclient\/bardWebInterface\/searchStructures\', \'searchForm\');'],[0,'            break;'],[-1,'    }'],[-1,'}'],[-1,'\/**'],[-1,' * Handle all free text searches'],[-1,' *\/'],[1,'function handleAllFreeTextSearches() {'],[1,'    handleSearch(\'\/bardwebclient\/bardWebInterface\/searchAssays\', \'searchForm\', \'assaysTab\', \'totalAssays\', \'Assay Definitions \', \'assays\');'],[1,'    handleSearch(\'\/bardwebclient\/bardWebInterface\/searchCompounds\', \'searchForm\', \'compoundsTab\', \'totalCompounds\', \'Compounds \', \'compounds\');'],[1,'    handleSearch(\'\/bardwebclient\/bardWebInterface\/searchProjects\', \'searchForm\', \'projectsTab\', \'totalProjects\', \'Projects \', \'projects\');'],[-1,'}'],[-1,''],[-1,'\/**'],[-1,' * Handle all ID searches'],[-1,' *\/'],[1,'function handleAllIdSearches() {'],[1,'    handleSearch(\'\/bardwebclient\/bardWebInterface\/searchAssaysByIDs\', \'searchForm\', \'assaysTab\', \'totalAssays\', \'Assay Definitions \', \'assays\');'],[1,'    handleSearch(\'\/bardwebclient\/bardWebInterface\/searchCompoundsByIDs\', \'searchForm\', \'compoundsTab\', \'totalCompounds\', \'Compounds \', \'compounds\');'],[1,'    handleSearch(\'\/bardwebclient\/bardWebInterface\/searchProjectsByIDs\', \'searchForm\', \'projectsTab\', \'totalProjects\', \'Projects \', \'projects\');'],[-1,'}'],[-1,'\/**'],[-1,' * Make Tabs inactive'],[-1,' * @param tabId - The ID of the tab'],[-1,' * @param tabListId - The ID of the tab list li element'],[-1,' * @param resourceId - The ID of the resource (assays, compounds or projects)'],[-1,' * @param tabDisplayPrefix - The prefix to display on tab'],[-1,' *\/'],[1,'function deActivateTabs(tabId, tabListId, resourceId, tabDisplayPrefix) {'],[9,'    var tabIdElement = \'#\' + tabId;'],[9,'    var resourceIdElement = \'#\' + resourceId;'],[9,'    var tabListIdElement = \'#\' + tabListId;'],[-1,''],[9,'    $(tabIdElement).html(tabDisplayPrefix);'],[9,'    $(resourceIdElement).html(\'\');'],[9,'    $(tabListIdElement).removeClass(\'active\');'],[-1,'}'],[-1,'\/**'],[-1,' * Make Tabs active'],[-1,' * @param tabId - The ID of the tab'],[-1,' * @param tabListId - The ID of the tab list li element'],[-1,' * @param resourceId - The ID of the resource (assays, compounds or projects)'],[-1,' * @param tabDisplayPrefix - The prefix to display on tab'],[-1,' *\/'],[1,'function activateTabs(tabId, tabListId, resourceId, tabDisplayPrefix) {'],[6,'    var tabIdElement = \'#\' + tabId;'],[6,'    var tabListIdElement = \'#\' + tabListId;'],[6,'    var resourceIdElement = \'#\' + resourceId;'],[-1,''],[6,'    $(tabIdElement).html(tabDisplayPrefix + spinnerImageLink);'],[6,'    $(resourceIdElement).html(\'\');'],[6,'    $(tabListIdElement).addClass(\'active\');'],[-1,'}'],[-1,'\/**'],[-1,' * Reset the tabs for structure searches'],[-1,' * Make the counts zero for each tab, before you start the search'],[-1,' *\/'],[1,'function resetTabsForStructureSearches() {'],[1,'    activateCurrentTab(\'compoundsTab\');'],[-1,'}'],[-1,''],[-1,'\/**'],[-1,' * Reset the tabs for structure searches'],[-1,' * Make the counts zero for each tab, before you start the search'],[-1,' *\/'],[1,'function activateCurrentTab(currentTab) {'],[4,'    switch (currentTab) {'],[-1,'        case \'compoundsTab\':'],[2,'            activateTabs(\'compoundsTab\', \'compoundsTabLi\', \'compounds\', \&quot;Compounds \&quot;);'],[2,'            deActivateTabs(\'assaysTab\', \'assaysTabLi\', \'assays\', \'Assay Definitions (0)\');'],[2,'            deActivateTabs(\'projectsTab\', \'projectsTabLi\', \'projects\', \'Projects (0)\');'],[2,'            break;'],[-1,'        case \'assaysTab\':'],[1,'            deActivateTabs(\'compoundsTab\', \'compoundsTabLi\', \'compounds\', \&quot;Compounds (0)\&quot;);'],[1,'            activateTabs(\'assaysTab\', \'assaysTabLi\', \'assays\', \'Assay Definitions \');'],[1,'            deActivateTabs(\'projectsTab\', \'projectsTabLi\', \'projects\', \'Projects (0)\');'],[1,'            break;'],[-1,'        case \'projectsTab\':'],[1,'            deActivateTabs(\'compoundsTab\', \'compoundsTabLi\', \'compounds\', \&quot;Compounds (0)\&quot;);'],[1,'            deActivateTabs(\'assaysTab\', \'assaysTabLi\', \'assays\', \'Assay Definitions (0)\');'],[1,'            activateTabs(\'projectsTab\', \'projectsTabLi\', \'projects\', \'Projects \');'],[1,'            break;'],[-1,'        default:'],[0,'            activateCurrentTab(\'compoundsTab\');'],[0,'            break;'],[-1,'    }'],[-1,'}'],[-1,'\/**'],[-1,' * Find the search type based on the search string supplied by the user'],[-1,' * @return {String} - One of \'FREE_TEXT\', \'STRUCTURE\', \'EMPTY\' or \'ID\''],[-1,' *\/'],[1,'function findSearchType(searchString) {'],[-1,''],[49,'    if (!$.trim(searchString).length) {  \/\/if this is an empty string, do nothing'],[1,'        return \&quot;EMPTY\&quot;;'],[-1,'    }'],[48,'    if (searchString.match(NUMBER_MATCHING_REGEX)) {\/\/this is an id match'],[4,'        return \&quot;ID\&quot;;'],[-1,'    }'],[-1,'    \/\/we want to find out if this is a Structure search'],[44,'    var searchStringSplit = searchString.split(\&quot;:\&quot;);'],[44,'    var searchType = searchStringSplit[0];'],[44,'    if (searchStringSplit.length == 2 &amp;&amp; $.trim(searchStringSplit[1]).length) { \/\/has to be of the form Exact:CCC so there must be 2 things in the array'],[39,'        searchType = searchType.toLowerCase();'],[39,'        var stringAfterColon = $.trim(searchStringSplit[1])'],[39,'        switch (searchType) { \/\/must be one of these to qualify as a structure search'],[-1,'            case \'exact\':'],[-1,'            case \'substructure\':'],[-1,'            case \'superstructure\':'],[-1,'            case \'similarity\':'],[12,'                return \'STRUCTURE\';'],[-1,'            case \'adid\': \/\/this is an assay search with ids'],[8,'                if (stringAfterColon.match(NUMBER_MATCHING_REGEX)) {\/\/this is an id match'],[6,'                    return \'ADID\';'],[-1,'                }'],[-1,''],[-1,'            case \'cid\':  \/\/this is a compound search with ids'],[10,'                if (stringAfterColon.match(NUMBER_MATCHING_REGEX)) {\/\/this is an id match'],[6,'                    return \'CID\''],[-1,'                }'],[-1,'            case \'pid\':  \/\/this is an project search with ids'],[12,'                if (stringAfterColon.match(NUMBER_MATCHING_REGEX)) {\/\/this is an id match'],[6,'                    return \'PID\''],[-1,'                }'],[-1,'        }'],[5,'    } else if (searchStringSplit.length == 2 &amp;&amp; !$.trim(searchStringSplit[1]).length) { \/\/e.g Exact: with no smile string'],[3,'        return \&quot;EMPTY\&quot;;'],[-1,'    }'],[11,'    return \&quot;FREE_TEXT\&quot;; \/\/this a Free Text Search'],[-1,'}']]</p></td>
            </tr><tr  onclick="__coverage_toggleSection('05d4aa96354929ef93ef7d655859f32f'); return false;">
                <td><a href="#">web-app/js/<strong>cart.js</strong></a></td>
                <td class="statements">64</td>
                <td class="executed">50</td>
                <td class="coverage">
                        78&thinsp;%
                </td>
                <td class="bar-container">
                        <div class="bar">
                            <span style="width: 78%; background-color: rgb(193, 219, 75);"></span>
                        </div>
                </td>
            </tr>
            <tr id="__src_05d4aa96354929ef93ef7d655859f32f" style="display: none;">
                <td class="line-coverage-cell" colspan="5"><p id="__data_05d4aa96354929ef93ef7d655859f32f">[[-1,'\/*'],[-1,' * Event handlers to interact with the QueryCart.'],[-1,' *\/'],[-1,''],[1,'function QueryCart() {'],[-1,'}'],[-1,''],[1,'QueryCart.prototype.toggleDetailsHandler = function() {'],[2,'    $(\&quot;.panel\&quot;).toggle(\&quot;fast\&quot;);'],[1,'    $(\&quot;.trigger\&quot;).toggleClass(\&quot;active\&quot;);'],[1,'    return false;'],[-1,'};'],[-1,''],[1,'QueryCart.prototype.refreshSummaryView = function() {'],[1,'    var ajaxLocation=\'#summaryView\';'],[1,'    jQuery.ajax({  type:\'GET\','],[-1,'        url:\'\/bardwebclient\/queryCart\/refreshSummaryView\','],[-1,'        success:function(data){'],[1,'            jQuery(ajaxLocation).html(data);'],[-1,'        }'],[-1,'    });'],[-1,'};'],[-1,''],[1,'QueryCart.prototype.refreshDetailsView = function() {'],[1,'    var ajaxLocation=\'#detailView\';'],[1,'    jQuery.ajax({  type:\'GET\','],[-1,'        url:\'\/bardwebclient\/queryCart\/refreshDetailsView\','],[-1,'        success:function(data){'],[1,'            jQuery(ajaxLocation).html(data);'],[-1,'        }'],[-1,'    });'],[-1,'};'],[-1,''],[1,'QueryCart.prototype.addItemToCartHandler = function() {'],[1,'    var id = $(this).attr(\'data-cart-id\');'],[1,'    var name = $(this).attr(\'data-cart-name\');'],[1,'    var type = $(this).attr(\'data-cart-type\');'],[1,'    var smiles = $(this).attr(\'data-cart-smiles\');'],[1,'    var numActive = $(this).attr(\'data-cart-numActive\');'],[1,'    var numAssays=$(this).attr(\'data-cart-numAssays\');'],[1,'    jQuery.ajax({  type:\'POST\','],[-1,'        data:{'],[-1,'            \'id\': id,'],[-1,'            \'type\': type,'],[-1,'            \'name\': name,'],[-1,'            \'smiles\': smiles,'],[-1,'            \'numActive\':numActive,'],[-1,'            \'numAssays\':numAssays'],[-1,'        },'],[-1,'        url:\'\/bardwebclient\/queryCart\/addItem\','],[-1,'        success:function (data) {'],[1,'            queryCart.publishCartChangeEvent(\'cart.itemAdded\', id);'],[-1,'        }'],[-1,'    });'],[1,'    return true;'],[-1,'};'],[-1,''],[1,'QueryCart.prototype.removeItemFromCartHandler = function() {'],[1,'    var id = $(this).attr(\'data-cart-id\');'],[1,'    var type = $(this).attr(\'data-cart-type\');'],[1,'    jQuery.ajax({  type:\'POST\','],[-1,'        data:{\'id\': id,'],[-1,'            \'type\': type},'],[-1,'        url:\'\/bardwebclient\/queryCart\/removeItem\','],[-1,'        success:function (data) {'],[1,'            queryCart.publishCartChangeEvent(\'cart.itemRemoved\', id);'],[-1,'        }'],[-1,'    });'],[1,'    return true;'],[-1,'};'],[-1,''],[1,'QueryCart.prototype.removeAll = function() {'],[1,'    jQuery.ajax({  type:\'POST\','],[-1,'        url:\'\/bardwebclient\/queryCart\/removeAll\','],[-1,'        success:function(data){'],[1,'            queryCart.publishCartChangeEvent(\'cart.itemRemoved\');'],[-1,'        },'],[-1,'        error:function(XMLHttpRequest,textStatus,errorThrown){'],[0,'            alert(\'problem clearing cart\');'],[0,'            console.log(errorThrown);'],[-1,'        }'],[-1,'    });'],[1,'    return false;'],[-1,'};'],[-1,''],[1,'QueryCart.prototype.publishCartChangeEvent = function(eventName, itemChangedId) {'],[0,'    $(\'.addToCartCheckbox,#summaryView,#detailView\').trigger(eventName, itemChangedId);'],[-1,'};'],[-1,''],[1,'QueryCart.prototype.refreshInCartCheckboxes = function(event, idToTarget) {'],[0,'    var id = $(this).attr(\'data-cart-id\');'],[0,'    if (idToTarget != null &amp;&amp; idToTarget != id) {'],[0,'        return false;'],[-1,'    }'],[0,'    var type = $(this).attr(\'data-cart-type\');'],[0,'    var elementToUpdate = $(this);'],[0,'    jQuery.ajax({  type:\'POST\','],[-1,'        url:\'\/bardwebclient\/queryCart\/isInCart\','],[-1,'        data:{\'id\': id,'],[-1,'            \'type\': type},'],[-1,'        success:function(data){'],[0,'            if (data == \'false\') {'],[0,'                elementToUpdate.prop(\'checked\', false);'],[-1,'            }'],[-1,'            else {'],[0,'                elementToUpdate.prop(\'checked\', true);'],[-1,'            }'],[-1,'        },'],[-1,'        error:function(XMLHttpRequest,textStatus,errorThrown){'],[0,'            alert(\'problem refreshing\');'],[0,'            console.log(errorThrown);'],[-1,'        }'],[-1,'    });'],[-1,'};'],[-1,''],[1,'QueryCart.prototype.init = function() {'],[1,'    $(document).on(\'click\', \'.trigger\', this.toggleDetailsHandler);'],[1,'    $(document).on(\'click\', \'.removeItemFromCart\', this.removeItemFromCartHandler);'],[1,'    $(document).on(\'click\', \'.removeAllFromCart\', this.removeAll);'],[1,'    $(document).on(\'click\', \'.addToCartCheckbox:checked\', this.addItemToCartHandler);'],[1,'    $(document).on(\'click\', \'.addToCartCheckbox:not(:checked)\', this.removeItemFromCartHandler);'],[1,'    $(document).on(\'cart.itemAdded\', \'.addToCartCheckbox\', this.refreshInCartCheckboxes);'],[1,'    $(document).on(\'cart.itemAdded\', \'#summaryView\', this.refreshSummaryView);'],[1,'    $(document).on(\'cart.itemAdded\', \'#detailView\', this.refreshDetailsView);'],[1,'    $(document).on(\'cart.itemRemoved\', \'.addToCartCheckbox\', this.refreshInCartCheckboxes);'],[1,'    $(document).on(\'cart.itemRemoved\', \'#summaryView\', this.refreshSummaryView);'],[1,'    $(document).on(\'cart.itemRemoved\', \'#detailView\', this.refreshDetailsView);'],[1,'    $(document).on(\'cart.refreshCheckboxes\', \'.addToCartCheckbox\', this.refreshInCartCheckboxes);'],[-1,'};'],[-1,''],[1,'var queryCart = new QueryCart();'],[1,'queryCart.init();']]</p></td>
            </tr>
        </tbody>
    </table>
    <div class="footer">Generated using <a href="http://timurstrekalov.github.com/saga/">Saga</a> version 1.3.0</div>
</body>
</html>